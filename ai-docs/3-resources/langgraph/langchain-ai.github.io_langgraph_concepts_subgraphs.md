[ Skip to content ](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#subgraphs)
**We are growing and hiring for multiple roles for LangChain, LangGraph and LangSmith.[ Join our team!](https://www.langchain.com/careers)**
[ ![logo](https://langchain-ai.github.io/langgraph/static/wordmark_dark.svg) ![logo](https://langchain-ai.github.io/langgraph/static/wordmark_light.svg) ](https://langchain-ai.github.io/langgraph/ "LangGraph")
LangGraph 
Overview 
[ ](https://langchain-ai.github.io/langgraph/concepts/subgraphs/?q= "Share")
Type to start searching
[ GitHub  ](https://github.com/langchain-ai/langgraph "Go to repository")
  * [ Guides ](https://langchain-ai.github.io/langgraph/)
  * [ Reference ](https://langchain-ai.github.io/langgraph/reference/)
  * [ Examples ](https://langchain-ai.github.io/langgraph/tutorials/rag/langgraph_agentic_rag/)
  * [ Resources ](https://langchain-ai.github.io/langgraph/concepts/faq/)


[ ![logo](https://langchain-ai.github.io/langgraph/static/wordmark_dark.svg) ![logo](https://langchain-ai.github.io/langgraph/static/wordmark_light.svg) ](https://langchain-ai.github.io/langgraph/ "LangGraph") LangGraph 
[ GitHub  ](https://github.com/langchain-ai/langgraph "Go to repository")
  * [ Guides  ](https://langchain-ai.github.io/langgraph/)
    * Get started 
      * [ Quickstart  ](https://langchain-ai.github.io/langgraph/agents/agents/)
      * [ LangGraph basics  ](https://langchain-ai.github.io/langgraph/concepts/why-langgraph/)
      * [ Deployment  ](https://langchain-ai.github.io/langgraph/tutorials/deployment/)
    * Prebuilt agents 
      * [ Overview  ](https://langchain-ai.github.io/langgraph/agents/overview/)
      * [ Running agents  ](https://langchain-ai.github.io/langgraph/agents/run_agents/)
      * [ Streaming  ](https://langchain-ai.github.io/langgraph/agents/streaming/)
      * [ Models  ](https://langchain-ai.github.io/langgraph/agents/models/)
      * [ Tools  ](https://langchain-ai.github.io/langgraph/agents/tools/)
      * [ MCP Integration  ](https://langchain-ai.github.io/langgraph/agents/mcp/)
      * [ Context  ](https://langchain-ai.github.io/langgraph/agents/context/)
      * [ Memory  ](https://langchain-ai.github.io/langgraph/agents/memory/)
      * [ Human-in-the-loop  ](https://langchain-ai.github.io/langgraph/agents/human-in-the-loop/)
      * [ Multi-agent  ](https://langchain-ai.github.io/langgraph/agents/multi-agent/)
      * [ Evals  ](https://langchain-ai.github.io/langgraph/agents/evals/)
      * [ Deployment  ](https://langchain-ai.github.io/langgraph/agents/deployment/)
      * [ UI  ](https://langchain-ai.github.io/langgraph/agents/ui/)
    * LangGraph framework 
      * [ Agent architectures  ](https://langchain-ai.github.io/langgraph/concepts/agentic_concepts/)
      * [ Graphs  ](https://langchain-ai.github.io/langgraph/concepts/low_level/)
      * [ Streaming  ](https://langchain-ai.github.io/langgraph/concepts/streaming/)
      * [ Persistence  ](https://langchain-ai.github.io/langgraph/concepts/persistence/)
      * [ Memory  ](https://langchain-ai.github.io/langgraph/concepts/memory/)
      * [ Human-in-the-loop  ](https://langchain-ai.github.io/langgraph/concepts/human_in_the_loop/)
      * [ Breakpoints  ](https://langchain-ai.github.io/langgraph/concepts/breakpoints/)
      * [ Time travel  ](https://langchain-ai.github.io/langgraph/concepts/time-travel/)
      * [ Tools  ](https://langchain-ai.github.io/langgraph/concepts/tools/)
      * Subgraphs 
        * [ Overview  ](https://langchain-ai.github.io/langgraph/concepts/subgraphs/)
        * [ Use subgraphs  ](https://langchain-ai.github.io/langgraph/how-tos/subgraph/)
      * [ Multi-agent  ](https://langchain-ai.github.io/langgraph/concepts/multi_agent/)
      * [ Functional API  ](https://langchain-ai.github.io/langgraph/concepts/functional_api/)
      * [ LangGraph's Runtime (Pregel)  ](https://langchain-ai.github.io/langgraph/concepts/pregel/)
      * [ Other  ](https://langchain-ai.github.io/langgraph/how-tos/async/)
    * LangGraph Platform 
      * [ Overview  ](https://langchain-ai.github.io/langgraph/concepts/langgraph_platform/)
      * [ Get started  ](https://langchain-ai.github.io/langgraph/tutorials/langgraph-platform/local-server/)
      * [ Components  ](https://langchain-ai.github.io/langgraph/concepts/langgraph_components/)
      * [ Data management  ](https://langchain-ai.github.io/langgraph/cloud/deployment/semantic_search/)
      * [ Authentication & access control  ](https://langchain-ai.github.io/langgraph/concepts/auth/)
      * [ Assistants  ](https://langchain-ai.github.io/langgraph/concepts/assistants/)
      * [ Threads  ](https://langchain-ai.github.io/langgraph/cloud/concepts/threads/)
      * [ Runs  ](https://langchain-ai.github.io/langgraph/cloud/concepts/runs/)
      * [ Streaming  ](https://langchain-ai.github.io/langgraph/cloud/concepts/streaming/)
      * [ Human-in-the-loop  ](https://langchain-ai.github.io/langgraph/cloud/how-tos/human_in_the_loop_breakpoint/)
      * [ MCP  ](https://langchain-ai.github.io/langgraph/concepts/server-mcp/)
      * [ Double-texting  ](https://langchain-ai.github.io/langgraph/concepts/double_texting/)
      * [ Webhooks  ](https://langchain-ai.github.io/langgraph/cloud/concepts/webhooks/)
      * [ Cron Jobs  ](https://langchain-ai.github.io/langgraph/cloud/concepts/cron_jobs/)
      * [ Server Customization  ](https://langchain-ai.github.io/langgraph/how-tos/http/custom_lifespan/)
      * [ Deployment  ](https://langchain-ai.github.io/langgraph/concepts/deployment_options/)
  * [ Reference  ](https://langchain-ai.github.io/langgraph/reference/)
  * [ Examples  ](https://langchain-ai.github.io/langgraph/tutorials/rag/langgraph_agentic_rag/)
  * [ Resources  ](https://langchain-ai.github.io/langgraph/concepts/faq/)


  1. [ Guides  ](https://langchain-ai.github.io/langgraph/)
  2. [ LangGraph framework  ](https://langchain-ai.github.io/langgraph/concepts/agentic_concepts/)
  3. [ Subgraphs  ](https://langchain-ai.github.io/langgraph/concepts/subgraphs/)

[ ](https://github.com/langchain-ai/langgraph/edit/main/docs/docs/concepts/subgraphs.md "Edit this page")
# Subgraphs[¶](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#subgraphs "Permanent link")
A subgraph is a [graph](https://langchain-ai.github.io/langgraph/concepts/low_level/#graphs) that is used as a [node](https://langchain-ai.github.io/langgraph/concepts/low_level/#nodes) in another graph — this is the concept of encapsulation applied to LangGraph. Subgraphs allow you to build complex systems with multiple components that are themselves graphs.
![Subgraph](https://langchain-ai.github.io/langgraph/concepts/img/subgraph.png)
Some reasons for using subgraphs are:
  * building [multi-agent systems](https://langchain-ai.github.io/langgraph/concepts/multi_agent/)
  * when you want to reuse a set of nodes in multiple graphs
  * when you want different teams to work on different parts of the graph independently, you can define each part as a subgraph, and as long as the subgraph interface (the input and output schemas) is respected, the parent graph can be built without knowing any details of the subgraph


The main question when adding subgraphs is how the parent graph and subgraph communicate, i.e. how they pass the [state](https://langchain-ai.github.io/langgraph/concepts/low_level/#state) between each other during the graph execution. There are two scenarios:
  * parent and subgraph have **shared state keys** in their state [schemas](https://langchain-ai.github.io/langgraph/concepts/low_level/#state). In this case, you can [include the subgraph as a node in the parent graph](https://langchain-ai.github.io/langgraph/how-tos/subgraph/#shared-state-schemas)
```
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-1)fromlanggraph.graphimport StateGraph, MessagesState, START
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-2)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-3)# Subgraph
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-4)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-5)defcall_model(state: MessagesState):
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-6)    response = model.invoke(state["messages"])
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-7)    return {"messages": response}
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-8)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-9)subgraph_builder = StateGraph(State)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-10)subgraph_builder.add_node(call_model)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-11)...
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-12)subgraph = subgraph_builder.compile()
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-13)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-14)# Parent graph
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-15)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-16)builder = StateGraph(State)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-17)builder.add_node("subgraph_node", subgraph)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-18)builder.add_edge(START, "subgraph_node")
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-19)graph = builder.compile()
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-20)...
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-0-21)graph.invoke({"messages": [{"role": "user", "content": "hi!"}]})

```

  * parent graph and subgraph have **different schemas** (no shared state keys in their state [schemas](https://langchain-ai.github.io/langgraph/concepts/low_level/#state)). In this case, you have to [call the subgraph from inside a node in the parent graph](https://langchain-ai.github.io/langgraph/how-tos/subgraph/#different-state-schemas): this is useful when the parent graph and the subgraph have different state schemas and you need to transform state before or after calling the subgraph
```
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-1)fromtyping_extensionsimport TypedDict, Annotated
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-2)fromlangchain_core.messagesimport AnyMessage
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-3)fromlanggraph.graphimport StateGraph, MessagesState, START
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-4)fromlanggraph.graph.messageimport add_messages
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-5)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-6)classSubgraphMessagesState(TypedDict):
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-7)    subgraph_messages: Annotated[list[AnyMessage], add_messages]
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-8)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-9)# Subgraph
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-10)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-11)defcall_model(state: SubgraphMessagesState):
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-12)    response = model.invoke(state["subgraph_messages"])
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-13)    return {"subgraph_messages": response}
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-14)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-15)subgraph_builder = StateGraph(State)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-16)subgraph_builder.add_node(call_model)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-17)...
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-18)subgraph = subgraph_builder.compile()
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-19)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-20)# Parent graph
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-21)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-22)defcall_subgraph(state: MessagesState):
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-23)    response = subgraph.invoke({"subgraph_messages": state["messages"]})
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-24)    return {"messages": response["subgraph_messages"]}
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-25)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-26)builder = StateGraph(State)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-27)builder.add_node("subgraph_node", call_subgraph)
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-28)builder.add_edge(START, "subgraph_node")
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-29)graph = builder.compile()
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-30)...
[](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__codelineno-1-31)graph.invoke({"messages": [{"role": "user", "content": "hi!"}]})

```


Was this page helpful? 
Thanks for your feedback! 
Thanks for your feedback! Please help us improve this page by adding to the discussion below. 
[ Previous  Use tools  ](https://langchain-ai.github.io/langgraph/how-tos/tool-calling/) [ Next  Use subgraphs  ](https://langchain-ai.github.io/langgraph/how-tos/subgraph/)
Copyright © 2025 LangChain, Inc | [Consent Preferences](https://langchain-ai.github.io/langgraph/concepts/subgraphs/#__consent)
Made with [ Material for MkDocs Insiders ](https://squidfunk.github.io/mkdocs-material/)
[ ](https://langchain-ai.github.io/langgraphjs/ "langchain-ai.github.io") [ ](https://github.com/langchain-ai/langgraph "github.com") [ ](https://twitter.com/LangChainAI "twitter.com")
#### Cookie consent
We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. **Clicking "Accept" makes our documentation better. Thank you!** ❤️
  *   * 

Accept Reject
